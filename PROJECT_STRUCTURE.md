# QR Custom Generator - Project Structure

This document provides a complete overview of the project structure and organization.

## Root Directory

```
qr-custom-generator/
├── .env                    # Environment variables (Supabase config)
├── .env.example           # Environment template
├── .gitignore             # Git ignore rules
├── package.json           # Project dependencies and scripts
├── package-lock.json      # Dependency lock file
├── vite.config.ts         # Vite configuration
├── tsconfig.json          # TypeScript root configuration
├── tsconfig.app.json      # TypeScript app configuration
├── tsconfig.node.json     # TypeScript node configuration
├── tailwind.config.js     # Tailwind CSS configuration
├── postcss.config.js      # PostCSS configuration
├── eslint.config.js       # ESLint configuration
├── index.html             # HTML entry point
├── README.md              # Main documentation
├── API.md                 # API documentation
├── EXAMPLES.md            # Usage examples
├── FEATURES.md            # Complete feature list
├── QUICKSTART.md          # Quick start guide
├── CONTRIBUTING.md        # Contribution guidelines
├── CHANGELOG.md           # Version history
├── LICENSE                # MIT License
└── PROJECT_STRUCTURE.md   # This file
```

## Source Directory (`src/`)

### Main Files
```
src/
├── main.tsx              # Application entry point
├── App.tsx               # Main application component
├── index.css             # Global styles (Tailwind imports)
└── vite-env.d.ts         # Vite type definitions
```

### Components (`src/components/`)
```
src/components/
├── ColorPicker.tsx       # Color selection with hex picker
├── ContentInput.tsx      # Content type selection and input forms
├── History.tsx           # QR code history display and management
├── LogoUpload.tsx        # Logo file upload component
├── QRPreview.tsx         # QR code preview and download options
├── ShareModal.tsx        # Social media sharing modal
├── Templates.tsx         # Template selection grid
└── ThemeToggle.tsx       # Dark/light mode toggle button
```

**Component Details:**

- **ColorPicker**: Interactive hex color picker with manual input
- **ContentInput**: Handles 6 content types with type-specific forms
- **History**: Lists recent QR codes with restore/delete actions
- **LogoUpload**: File upload with preview and size validation
- **QRPreview**: Shows generated QR code with export options
- **ShareModal**: Social platform integration and native sharing
- **Templates**: Displays 8 pre-built template options
- **ThemeToggle**: Sun/moon icon with theme switching

### Types (`src/types/`)
```
src/types/
├── index.ts              # Main type definitions
└── database.types.ts     # Supabase database types
```

**Type Definitions:**
- `ContentType`: url | text | email | phone | wifi | location
- `ErrorCorrectionLevel`: L | M | Q | H
- `CornerStyle`: square | rounded | dots
- `ExportFormat`: png | jpg | svg
- `QRCodeConfig`: Configuration interface
- `QRCodeHistory`: Database record interface
- `QRTemplate`: Template definition interface
- `WiFiConfig`: WiFi credentials interface
- `LocationConfig`: GPS coordinates interface

### Constants (`src/constants/`)
```
src/constants/
└── templates.ts          # Template definitions and constants
```

**Constants Include:**
- `QR_TEMPLATES`: 8 pre-built template definitions
- `CONTENT_TYPE_LABELS`: Human-readable type names
- `ERROR_CORRECTION_INFO`: ECC level descriptions
- `SIZE_PRESETS`: Quick size selections

### Utilities (`src/utils/`)
```
src/utils/
└── qrGenerator.ts        # QR code generation logic
```

**Utility Functions:**
- `formatContentByType()`: Formats content based on type
- `generateQRCode()`: Creates QR code with customization
- `validateURL()`: URL format validation
- `validateEmail()`: Email format validation
- `validatePhone()`: Phone number validation
- `validateContent()`: Type-specific validation
- `downloadQRCode()`: Handle file downloads

### Hooks (`src/hooks/`)
```
src/hooks/
└── useDarkMode.ts        # Dark mode management hook
```

**Custom Hooks:**
- `useDarkMode()`: Theme state and localStorage sync

### Library Configuration (`src/lib/`)
```
src/lib/
└── supabase.ts           # Supabase client configuration
```

## Supabase Directory (`supabase/`)

```
supabase/
└── functions/
    └── generate-qr/
        └── index.ts      # Edge Function for API
```

**Edge Function:**
- REST API endpoint for programmatic QR generation
- Supports all customization options
- Returns base64 encoded QR codes

## Build Output (`dist/`)

Generated by `npm run build`:

```
dist/
├── index.html            # Optimized HTML
├── assets/
│   ├── index-[hash].js   # Bundled JavaScript
│   └── index-[hash].css  # Bundled CSS
└── vite.svg              # Vite logo (if used)
```

## File Sizes

**Source Code:**
- Components: ~8 files, ~1,500 lines
- Types: ~2 files, ~150 lines
- Utils: ~1 file, ~150 lines
- Constants: ~1 file, ~100 lines
- Total TypeScript: ~2,000 lines

**Build Output:**
- JavaScript bundle: ~340 KB (uncompressed), ~104 KB (gzipped)
- CSS bundle: ~20 KB (uncompressed), ~4 KB (gzipped)
- Total: ~108 KB (gzipped)

## Dependencies

### Production Dependencies (6)
```json
{
  "@supabase/supabase-js": "^2.57.4",    // Database client
  "html-to-image": "^1.11.13",           // Image export
  "lucide-react": "^0.344.0",            // Icon library
  "qrcode": "^1.5.4",                    // QR generation
  "react": "^18.3.1",                    // React framework
  "react-colorful": "^5.6.1",            // Color picker
  "react-dom": "^18.3.1"                 // React DOM
}
```

### Development Dependencies (13)
```json
{
  "@eslint/js": "^9.9.1",                    // ESLint config
  "@types/qrcode": "^1.5.6",                 // QRCode types
  "@types/react": "^18.3.5",                 // React types
  "@types/react-dom": "^18.3.0",             // React DOM types
  "@vitejs/plugin-react": "^4.3.1",          // Vite React plugin
  "autoprefixer": "^10.4.18",                // PostCSS autoprefixer
  "eslint": "^9.9.1",                        // Linting
  "eslint-plugin-react-hooks": "^5.1.0-rc.0",// React hooks linting
  "eslint-plugin-react-refresh": "^0.4.11",  // React refresh
  "globals": "^15.9.0",                      // Global variables
  "postcss": "^8.4.35",                      // CSS processing
  "tailwindcss": "^3.4.1",                   // CSS framework
  "typescript": "^5.5.3",                    // TypeScript
  "typescript-eslint": "^8.3.0",             // TS ESLint
  "vite": "^5.4.2"                           // Build tool
}
```

## Database Schema

### Tables

**qr_codes**
```sql
- id (uuid, primary key)
- user_id (uuid, nullable)
- content_type (text)
- content (text)
- qr_color (text)
- bg_color (text)
- size (integer)
- logo_url (text, nullable)
- error_correction (text)
- corner_style (text)
- template_name (text, nullable)
- qr_data_url (text)
- created_at (timestamptz)
```

### Indexes
- `idx_qr_codes_user_id`: On user_id
- `idx_qr_codes_created_at`: On created_at (DESC)

### Policies
- Users can view their own QR codes
- Users can insert their own QR codes
- Users can delete their own QR codes
- Anonymous users can insert QR codes
- Anonymous users can view their session QR codes

## Scripts

Available npm scripts:

```bash
npm run dev       # Start development server (port 5173)
npm run build     # Build for production
npm run preview   # Preview production build
npm run lint      # Run ESLint
npm run typecheck # Run TypeScript type checking
```

## Code Organization Principles

### Component Structure
- Single responsibility per component
- Props interface at the top
- Hooks before JSX
- Event handlers before render
- Clean, readable JSX

### File Naming
- Components: PascalCase.tsx
- Utilities: camelCase.ts
- Types: index.ts or descriptive.types.ts
- Constants: descriptive.ts

### Import Order
1. React imports
2. Third-party libraries
3. Local components
4. Types
5. Utilities
6. Constants
7. Styles

### Code Style
- TypeScript strict mode
- ESLint rules enforced
- Prettier-compatible formatting
- Tailwind CSS for all styling
- No inline styles except dynamic colors

## Performance Optimizations

### Build Optimizations
- Code splitting (Vite automatic)
- Tree shaking
- Minification
- Gzip compression
- CSS extraction

### Runtime Optimizations
- React.StrictMode for development
- Efficient re-renders with proper hooks
- Canvas-based QR generation
- Lazy loading for history
- Debounced color picker

## Security Features

### Frontend
- Input validation
- XSS prevention (React automatic)
- HTTPS-only content
- No eval() usage
- Secure dependencies

### Backend
- Row Level Security (RLS)
- CORS configuration
- Anonymous user support
- No sensitive data exposure

## Browser Support

### Desktop
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

### Mobile
- iOS Safari 14+
- Chrome Mobile 90+
- Samsung Internet 14+
- Firefox Mobile 88+

## Deployment Ready

The project is ready to deploy to:
- Vercel (recommended)
- Netlify
- AWS Amplify
- GitHub Pages
- Any static hosting service

## Development Workflow

1. Clone repository
2. Install dependencies: `npm install`
3. Start dev server: `npm run dev`
4. Make changes
5. Run typecheck: `npm run typecheck`
6. Run lint: `npm run lint`
7. Build: `npm run build`
8. Preview: `npm run preview`
9. Deploy

## Documentation Files

### User Documentation
- **README.md**: Complete user guide and documentation
- **QUICKSTART.md**: 5-minute getting started guide
- **EXAMPLES.md**: Real-world usage examples
- **FEATURES.md**: Complete feature list

### Developer Documentation
- **API.md**: REST API documentation
- **CONTRIBUTING.md**: Contribution guidelines
- **PROJECT_STRUCTURE.md**: This file
- **CHANGELOG.md**: Version history

### Legal
- **LICENSE**: MIT License

## Questions?

For more information:
- General usage: See README.md
- API usage: See API.md
- Examples: See EXAMPLES.md
- Contributing: See CONTRIBUTING.md

---

Last updated: 2024-12-05
Version: 1.0.0
